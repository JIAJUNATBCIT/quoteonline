<div class="container mt-4 profile-content">
  <div class="row justify-content-center">
    <div class="col-md-10 col-lg-8">
      <!-- 个人资料卡片 -->
      <div class="card shadow-sm border-0 mb-4">
        <div class="card-header bg-gradient-primary text-white py-3">
          <div class="d-flex align-items-center">
            <i class="bi bi-person-circle me-2 fs-4"></i>
            <h4 class="mb-0">个人资料</h4>
          </div>
        </div>
        
        <div class="card-body p-4">
          <!-- 成功/错误提示 -->
          <div *ngIf="success" class="alert alert-success alert-dismissible fade show" role="alert">
            <i class="bi bi-check-circle-fill me-2"></i>
            {{ success }}
            <button type="button" class="btn-close" (click)="success = ''"></button>
          </div>
          
          <div *ngIf="error" class="alert alert-danger alert-dismissible fade show" role="alert">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            {{ error }}
            <button type="button" class="btn-close" (click)="error = ''"></button>
          </div>
          
          <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
            <div class="row g-3">
              <div class="col-md-6">
                <div class="form-floating">
                  <input type="text" 
                         class="form-control" 
                         id="name"
                         placeholder="请输入姓名"
                         formControlName="name"
                         [class.is-invalid]="profileForm.get('name')?.invalid && profileForm.get('name')?.touched">
                  <label for="name" class="form-label">
                    <i class="bi bi-person me-1"></i>姓名
                  </label>
                  <div class="invalid-feedback" *ngIf="profileForm.get('name')?.errors?.['required']">
                    <i class="bi bi-exclamation-circle me-1"></i>姓名是必填项
                  </div>
                </div>
              </div>
              
              <div class="col-md-6">
                <div class="form-floating">
                  <input type="email" 
                         class="form-control bg-light" 
                         id="email"
                         placeholder="请输入邮箱"
                         formControlName="email"
                         readonly
                         [class.is-invalid]="profileForm.get('email')?.invalid && profileForm.get('email')?.touched">
                  <label for="email" class="form-label">
                    <i class="bi bi-envelope me-1"></i>邮箱
                  </label>
                  <div class="form-text text-muted">
                    <i class="bi bi-info-circle me-1"></i>邮箱地址注册后不可修改
                  </div>
                  <div class="invalid-feedback" *ngIf="profileForm.get('email')?.errors?.['required']">
                    <i class="bi bi-exclamation-circle me-1"></i>邮箱是必填项
                  </div>
                  <div class="invalid-feedback" *ngIf="profileForm.get('email')?.errors?.['email']">
                    <i class="bi bi-exclamation-circle me-1"></i>请输入有效的邮箱地址
                  </div>
                </div>
              </div>
            </div>
            
            <div class="row g-3 mt-1">
              <div class="col-md-6">
                <div class="form-floating">
                  <input type="text" 
                         class="form-control" 
                         id="company"
                         placeholder="请输入公司名称"
                         formControlName="company">
                  <label for="company" class="form-label">
                    <i class="bi bi-building me-1"></i>公司名称
                  </label>
                </div>
              </div>
              
              <div class="col-md-6">
                <div class="form-floating">
                  <input type="tel" 
                         class="form-control" 
                         id="phone"
                         placeholder="请输入联系电话"
                         formControlName="phone">
                  <label for="phone" class="form-label">
                    <i class="bi bi-telephone me-1"></i>联系电话
                  </label>
                  <div class="form-text text-muted" *ngIf="profileForm.get('phone')?.errors?.['pattern']">
                    <i class="bi bi-exclamation-triangle me-1"></i>请输入有效的手机号码
                  </div>
                </div>
              </div>
            </div>
            
            <div class="mt-3">
              <div class="form-floating">
                <textarea class="form-control" 
                          id="address"
                          placeholder="请输入地址"
                          style="height: 100px"
                          formControlName="address"></textarea>
                <label for="address" class="form-label">
                  <i class="bi bi-geo-alt me-1"></i>地址
                </label>
              </div>
            </div>
            
            <div class="d-flex justify-content-between align-items-center mt-4 pt-3 border-top">
              <button type="button" class="btn btn-outline-secondary" routerLink="/quotes">
                <i class="bi bi-arrow-left me-2"></i>返回
              </button>
              <button type="submit" 
                      class="btn btn-primary btn-lg px-4"
                      [disabled]="profileForm.invalid || loading">
                <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
                <i *ngIf="!loading" class="bi bi-check-lg me-2"></i>
                {{ loading ? '保存中...' : '保存资料' }}
              </button>
            </div>
          </form>
        </div>
      </div>
      
      <!-- 密码修改卡片 -->
      <div class="card shadow-sm border-0">
        <div class="card-header bg-gradient-warning text-dark py-3">
          <div class="d-flex align-items-center">
            <i class="bi bi-shield-lock me-2 fs-4"></i>
            <h5 class="mb-0">修改密码</h5>
          </div>
        </div>
        
        <div class="card-body p-4">
          <form [formGroup]="passwordForm" (ngSubmit)="onPasswordSubmit()">
            <div class="mb-3">
              <div class="form-floating">
                <input type="password" 
                       class="form-control" 
                       id="currentPassword"
                       placeholder="请输入当前密码"
                       formControlName="currentPassword"
                       [class.is-invalid]="passwordForm.get('currentPassword')?.invalid && passwordForm.get('currentPassword')?.touched">
                <label for="currentPassword" class="form-label">
                  <i class="bi bi-key me-1"></i>当前密码
                </label>
                <div class="invalid-feedback" *ngIf="passwordForm.get('currentPassword')?.errors?.['required']">
                  <i class="bi bi-exclamation-circle me-1"></i>请输入当前密码
                </div>
              </div>
            </div>
            
            <div class="mb-3">
              <div class="form-floating">
                <input type="password" 
                       class="form-control" 
                       id="newPassword"
                       placeholder="请输入新密码"
                       formControlName="newPassword"
                       [class.is-invalid]="passwordForm.get('newPassword')?.invalid && passwordForm.get('newPassword')?.touched">
                <label for="newPassword" class="form-label">
                  <i class="bi bi-lock me-1"></i>新密码
                </label>
                <div class="invalid-feedback" *ngIf="passwordForm.get('newPassword')?.errors?.['required']">
                  <i class="bi bi-exclamation-circle me-1"></i>请输入新密码
                </div>
                <div class="invalid-feedback" *ngIf="passwordForm.get('newPassword')?.errors?.['minlength']">
                  <i class="bi bi-exclamation-circle me-1"></i>密码长度至少6位
                </div>
              </div>
            </div>
            
            <div class="mb-4">
              <div class="form-floating">
                <input type="password" 
                       class="form-control" 
                       id="confirmPassword"
                       placeholder="请确认新密码"
                       formControlName="confirmPassword"
                       [class.is-invalid]="passwordForm.invalid && passwordForm.get('confirmPassword')?.touched">
                <label for="confirmPassword" class="form-label">
                  <i class="bi bi-lock-fill me-1"></i>确认新密码
                </label>
                <div class="invalid-feedback" *ngIf="passwordForm.errors?.['passwordMismatch']">
                  <i class="bi bi-exclamation-circle me-1"></i>两次输入的密码不一致
                </div>
              </div>
            </div>
            
            <div class="d-flex justify-content-end">
              <button type="submit" 
                      class="btn btn-warning btn-lg px-4"
                      [disabled]="passwordForm.invalid || loading">
                <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
                <i *ngIf="!loading" class="bi bi-shield-check me-2"></i>
                {{ loading ? '修改中...' : '修改密码' }}
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>